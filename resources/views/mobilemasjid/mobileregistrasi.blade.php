<!doctype html>
<html lang="en" class="green-theme">

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="Maxartkiller">

    <title>Cita Amanat martadiredja</title>

    <!-- Material design icons CSS -->
    <link rel="stylesheet" href="mobile/vendor/materializeicon/material-icons.css">

    <!-- Roboto fonts CSS -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="mobile/vendor/bootstrap-4.4.1/css/bootstrap.min.css" rel="stylesheet">

    <!-- Swiper CSS -->
    <link href="mobile/vendor/swiper/css/swiper.min.css" rel="stylesheet">

    <!-- Chosen multiselect CSS -->
    <link href="mobile/vendor/chosen_v1.8.7/chosen.min.css" rel="stylesheet">

    <!-- nouislider CSS -->
    <link href="mobile/vendor/nouislider/nouislider.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="mobile/css/style.css" rel="stylesheet">
</head>

<body>
    <div class="row no-gutters vh-100 loader-screen">
        <div class="col align-self-center text-white text-center">
            <img src="mobile/img/logoyayasanwhite.png" width="100" height="100" alt="logo">
            <h1><span class="font-weight-light">Cita</span>Amanat</h1>
            <div class="laoderhorizontal">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
    </div>
    <div class="sidebar">
        <div class="text-center">
            <div class="figure-menu shadow">
                <figure><img src="mobile/img/user1.png" alt=""></figure>
            </div>
            <h5 class="mb-1 ">Ammy Jahnson</h5>
            <p class="text-mute small">Sydney, Australia</p>
        </div>
        <br>
        <div class="row mx-0">
            <div class="col">
                <div class="card mb-3 border-0 shadow-sm bg-template-light">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <p class="text-secondary small mb-0">Balance Available</p>
                                <h6 class="text-dark my-0">$2585.00</h6>
                            </div>
                            <div class="col-auto">
                                <button class="btn btn-default button-rounded-36 shadow"><i
                                        class="material-icons">add</i></button>
                            </div>
                        </div>
                    </div>
                </div>
                <h5 class="subtitle text-uppercase"><span>Menu</span></h5>
                <div class="list-group main-menu">
                    <a href="index.html" class="list-group-item list-group-item-action active">Store</a>
                    <a href="notification.html" class="list-group-item list-group-item-action">Notification <span
                            class="badge badge-dark text-white">2</span></a>
                    <a href="all-products.html" class="list-group-item list-group-item-action">All Products</a>
                    <a href="my-order.html" class="list-group-item list-group-item-action">My Order</a>
                    <a href="profile.html" class="list-group-item list-group-item-action">My Profile</a>
                    <a href="controls.html" class="list-group-item list-group-item-action">Pages Controls <span
                            class="badge badge-light ml-2">Check</span></a>
                    <a href="setting.html" class="list-group-item list-group-item-action">Settings</a>
                    <a href="login.html" class="list-group-item list-group-item-action mt-4">Logout</a>
                </div>
            </div>
        </div>

    </div>
    <div class="wrapper">
        <div class="header">
            <div class="row no-gutters">
                <div class="col-auto">
                    <button class="btn  btn-link text-white menu-btn"><img src="mobile/img/linkmenu.png"
                            alt=""><span class="new-notification"></span></button>
                </div>
                <div class="col text-center">
                    <h6 class=" mt-3 text-white">Cita Amanat Martadiredja</h6>
                </div>
                <div class="col-auto">
                    <a href="profile.html" class="btn  btn-link text-white"><i
                            class="material-icons">account_circle</i></a>
                </div>
            </div>
        </div>

        <!-- MOBILE HEADER (hanya tampil di HP) -->
        <!-- MOBILE HEADER (Background image + text di dalam gambar) -->
        <div class="mobile-header-registrasi text-white d-block d-md-none">
            <div class="content-wrapper">
                <h5 class="text-uppercase mb-2">Mobile</h5>
                <h5 class="text-uppercase mb-2">Registration</h5>

            </div>
        </div>
        <style>
            .nav-tabs .nav-item {
                flex: 0 0 25%;
                max-width: 25%;
            }

            .card-header-mobile {
                padding: 0.75rem 1.25rem;
                margin-bottom: 0;
                background-color: rgb(5, 199, 89) !important;
                border-bottom: 1px solid rgba(0, 0, 0, 0.125);
            }


            .nav-link.locked {
                pointer-events: none;
                opacity: 0.5;
            }

            .step-icon {
                pointer-events: none;
            }

            .nav-link.active .step-icon {
                background-color: #17a2b8;
                color: #fff;
            }

            .nav-link.done .step-icon {
                background-color: #28a745;
                color: #fff;
            }

            .step-icon {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0;
            }

            .step-icon-i {
                font-size: 18px;
                line-height: 1;
            }
        </style>

        <div class="container">
            {{-- row 1 start --}}

            <div class="subtitle h6 mb-3">
                <div class="d-inline-block">
                    Registrasi Masjid:<br>

                </div>
            </div>
            <nav>
                <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">

                    <!-- STEP 1 -->
                    <a class="nav-item nav-link text-left active" id="nav-step1-tab" data-toggle="tab" href="#nav-step1"
                        role="tab" aria-controls="nav-step1" aria-selected="true">

                        <div class="row">
                            <div class="col-auto align-self-center pr-1">
                                <span class="step-icon btn btn-success button-rounded-26">
                                    <i class="material-icons step-icon-i"></i>
                                </span>

                            </div>
                            <div class="col pl-2">
                                <h6 class="text-dark my-0">Step 1</h6>
                            </div>
                        </div>
                    </a>

                    <!-- STEP 2 -->
                    <a class="nav-item nav-link text-left locked" id="nav-step2-tab" data-toggle="tab"
                        href="#nav-step2" role="tab" aria-controls="nav-step2" aria-selected="false">

                        <div class="row">
                            <div class="col-auto align-self-center pr-1">
                                <span class="step-icon btn btn-success button-rounded-26">
                                    <i class="material-icons step-icon-i"></i>
                                </span>
                            </div>
                            <div class="col pl-2">
                                <h6 class="text-dark my-0">Step 2</h6>
                            </div>
                        </div>
                    </a>

                    <!-- STEP 3 -->
                    <a class="nav-item nav-link text-left locked" id="nav-step3-tab" data-toggle="tab"
                        href="#nav-step3" role="tab" aria-controls="nav-step3" aria-selected="false">

                        <div class="row">
                            <div class="col-auto align-self-center pr-1">
                                <span class="step-icon btn btn-success button-rounded-26">
                                    <i class="material-icons step-icon-i"></i>
                                </span>
                            </div>
                            <div class="col pl-2">
                                <h6 class="text-dark my-0">Step 3</h6>
                            </div>
                        </div>
                    </a>

                    <!-- STEP 4 -->
                    <a class="nav-item nav-link text-left locked" id="nav-step4-tab" data-toggle="tab"
                        href="#nav-step4" role="tab" aria-controls="nav-step4" aria-selected="false">

                        <div class="row">
                            <div class="col-auto align-self-center pr-1">
                                <span class="step-icon btn btn-success button-rounded-26">
                                    <i class="material-icons step-icon-i"></i>
                                </span>
                            </div>
                            <div class="col pl-2">
                                <h6 class="text-dark my-0">Step 4</h6>
                            </div>
                        </div>
                    </a>

                </div>
            </nav>


            <form method="POST" enctype="multipart/form-data" action="{{ route('masjidPublicStore') }}">
                @csrf
                {{-- start form data pengelola mesjid --}}
                <div class="tab-content" id="nav-tabContent">

                    <!-- STEP 1 -->
                    <div class="tab-pane fade show active" id="nav-step1" role="tabpanel"
                        aria-labelledby="nav-step1-tab">
                        <div class="card mb-4">
                            <div class="card-header-mobile  text-light  ">
                                <b>DATA PENGELOLA MASJID</b>
                            </div>

                            <div class="card-body">
                                <div class="row">

                                    <div class="col-md-12 mb-5">
                                        <label for="nama_ketua_dkm-field" class="pb-2">Nama Ketua DKM</label>
                                        <input type="text" class="form-control" style="background-color: #eafced;"
                                            name="nama_ketua_dkm" id="nama_ketua_dkm-field"
                                            value="{{ old('nama_ketua_dkm') }}" required>
                                    </div>


                                    <div class="col-md-12 mb-5 position-relative">
                                        <label class="form-label">Telepon/HP Ketua DKM (Awali nomor dengan 62 bukan
                                            Nol)</label>

                                        <input type="text" name="telp_ketua_dkm" class="form-control input-hp"
                                            id="telp_ketua_dkm-field" style="background-color: #eafced;"
                                            value="{{ old('telp_ketua_dkm') }}" required>

                                        <small class="text-muted d-block">Mengetik Angka nol di awal akan otomatis jadi
                                            <b>62</b> ,
                                            tinggal lanjutkan ke angka berikutnya. <b>Contoh: 628157XXXX</b></small>
                                    </div>

                                    <div class="col-md-12 mb-5">
                                        <label for="penerima_informasi-field" class="pb-2">
                                            Nama Penerima Informasi
                                            <small class="text-muted d-block">(Bisa ketua DKM, marbot, atau yang
                                                ditunjuk)</small>
                                        </label>
                                        <input type="text" class="form-control" style="background-color: #eafced;"
                                            name="penerima_informasi" id="penerima_informasi-field"
                                            value="{{ old('penerima_informasi') }}" required>
                                    </div>

                                    <div class="col-md-12 mb-5 position-relative">
                                        <label class="form-label">Telepon Penerima Informasi (Awali nomor dengan 62
                                            bukan
                                            Nol)</label>

                                        <input type="text" name="telp_penerima_informasi"
                                            id="telp_penerima_informasi-field" class="form-control input-hp"
                                            style="background-color: #eafced;"
                                            value="{{ old('telp_penerima_informasi') }}" required>
                                        <small class="text-muted d-block">Mengetik angka nol di awal akan otomatis jadi
                                            <b>62</b> ,
                                            tinggal lanjutkan ke angka berikutnya. <b>Contoh: 628157XXXX</b></small>
                                    </div>

                                    <a href="javascript:void(0)"
                                        class="btn btn-lg btn-default text-white btn-block btn-rounded shadow btn-next">
                                        <span>Berikutnya</span>
                                        <i class="material-icons">arrow_forward</i>
                                    </a>

                                </div>
                            </div>
                        </div>
                    </div>
                    {{-- End form data pengelola mesjid --}}
                    <!-- STEP 2 -->
                    <div class="tab-pane fade " id="nav-step2" role="tabpanel" aria-labelledby="nav-step2-tab">
                        <div class="card mb-4">
                            <div class="card-header-mobile  text-light  ">
                                <b>DATA DETAIL MASJID/MUSHOLA</b>
                            </div>
                            <div class="card-body">
                                <div class="row">

                                    <div class="col-md-12 mb-4">
                                        <label class="form-label">
                                            <span class="text-danger">*</span> Jenis Bangunan (Masjid atau Mushola):
                                        </label>
                                        <div
                                            style="background-color: #eafced; padding: 10px; border-radius: 5px; display: flex; gap: 30px; align-items: center;">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="jenis_bangunan"
                                                    id="masjid" value="Masjid"
                                                    {{ old('jenis_bangunan') == 'Masjid' ? 'checked' : '' }}>
                                                <label class="form-check-label" for="masjid">Masjid</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="jenis_bangunan"
                                                    id="mushola" value="Mushola"
                                                    {{ old('jenis_bangunan') == 'Mushola' ? 'checked' : '' }}>
                                                <label class="form-check-label" for="mushola">Mushola</label>
                                            </div>
                                        </div>
                                        @error('jenis_bangunan')
                                            <small class="text-danger">{{ $message }}</small>
                                        @enderror
                                    </div>

                                    <div class="col-md-12 mb-4">
                                        <label for="nama_masjid-field">Nama Masjid / Mushola</label>
                                        <input type="text" class="form-control" style="background-color: #eafced;"
                                            name="nama_masjid" id="nama_masjid-field"
                                            value="{{ old('nama_masjid') }}" required>
                                    </div>
                                    <div class="col-md-12 mb-4">
                                        <label for="alamat_lengkap-field">Alamat Lengkap</label>
                                        <input type="text" class="form-control" style="background-color: #eafced;"
                                            name="alamat_lengkap" id="alamat_lengkap-field"
                                            value="{{ old('alamat_lengkap') }}" required>
                                    </div>

                                    {{-- Provinsi --}}
                                    <div class="col-md-12 mb-4">
                                        <label>Provinsi</label>
                                        <select name="province_id" id="province_id-field" class="form-control"
                                            style="background-color:#eafced;" required>
                                            <option value="">-- Pilih Provinsi --</option>
                                            @foreach ($provinces as $prov)
                                                <option value="{{ $prov->id }}">{{ $prov->name }}</option>
                                            @endforeach
                                        </select>
                                    </div>

                                    {{-- Kabupaten --}}
                                    <div class="col-md-12 mb-4">
                                        <label>Kabupaten / Kota</label>
                                        <select name="regency_id" id="regency_id-field" class="form-control"
                                            style="background-color:#eafced;" required>
                                            <option value="">-- Pilih Kabupaten/Kota --</option>

                                        </select>
                                    </div>

                                    {{-- Kecamatan --}}
                                    <div class="col-md-12 mb-4">
                                        <label>Kecamatan</label>
                                        <select name="district_id" id="district_id-field" class="form-control"
                                            style="background-color:#eafced;" required>
                                            <option value="">-- Pilih Kecamatan --</option>
                                        </select>
                                    </div>

                                    {{-- Kelurahan --}}
                                    <div class="col-md-12 mb-4">
                                        <label>Kelurahan / Desa</label>
                                        <select name="village_id" id="village_id-field" class="form-control"
                                            style="background-color:#eafced;" required>
                                            <option value="">-- Pilih Kelurahan/Desa --</option>
                                        </select>
                                    </div>

                                    <div class="col-md-12 mb-4">
                                        <label for="foto_masjid" class="form-label">Foto Masjid (Diusahakan Foto
                                            posisi
                                            Landscape)</label>
                                        <input type="file" name="foto_masjid" id="foto_masjid-field"
                                            class="form-control" style="background-color: #eafced;" accept="image/*"
                                            required>
                                    </div>
                                    <div id="koordinatDisplay" style="margin-bottom: 10px; font-weight: bold;">
                                        Lat: - , Lng: -
                                    </div>

                                    <div class="col-md-12 mb-4">
                                        <label for="map">Tandai Lokasi Masjid di Peta</label>
                                        <div id="map" style="height: 300px; width:350px; border-radius: 10px;">
                                        </div>

                                        <input class="form-control" type="hidden" name="map_lokasi_masjid"
                                            id="map_lokasi_masjid" value="{{ old('map_lokasi_masjid') }}">
                                    </div>
                                    <a href="javascript:void(0)"
                                        class="btn btn-lg btn-default text-white btn-block btn-rounded shadow btn-next">
                                        <span>Berikutnya</span>
                                        <i class="material-icons">arrow_forward</i>
                                    </a>

                                </div>
                            </div>
                        </div>
                    </div>
                    {{-- End form data pengelola mesjid --}}
                    <!-- STEP 3 -->
                    <div class="tab-pane fade" id="nav-step3" role="tabpanel" aria-labelledby="nav-step3-tab">
                        <div class="card mb-4">
                            <div class="card-header-mobile  text-light  ">
                                <b>DATA METERAN LISTRIK PLN</b>
                            </div>
                            <div class="card-body">
                                <div class="row">


                                    <div class="col-md-12 mb-4">
                                        <label for="id_pelanggan" class="form-label">ID Pelanggan</label>
                                        <input type="text" name="id_pelanggan" class="form-control"
                                            id="id_pelanggan-field" style="background-color: #eafced;"
                                            value="{{ old('id_pelanggan') }}" required>

                                        @error('id_pelanggan')
                                            <div class="text-danger mt-2">{{ $message }}</div>
                                        @enderror
                                    </div>


                                    <div class="col-md-12 mb-4">
                                        <label for="no_meteran_listrik" class="form-label">Nomor Meteran
                                            Listrik</label>
                                        <input type="text" name="no_meteran_listrik" class="form-control"
                                            id="no_meteran_listrik-field" style="background-color: #eafced;"
                                            value="{{ old('no_meteran_listrik') }}">

                                        @error('no_meteran_listrik')
                                            <div class="text-danger mt-2">{{ $message }}</div>
                                        @enderror
                                    </div>




                                    <div class="col-md-12 mb-4">
                                        <label for="nama_pelanggan-field" class="pb-2">Nama Pelanggan PLN</label>
                                        <input type="text" class="form-control" style="background-color: #eafced;"
                                            value="{{ old('nama_pelanggan') }}" name="nama_pelanggan"
                                            id="nama_pelanggan-field" required>
                                    </div>

                                    <!-- 4. Jenis Pembayaran Listrik -->
                                    <div class="col-md-12 mb-4">
                                        <label class="form-label">
                                            <span class="text-danger">*</span>Jenis Pembayaran Listrik :
                                        </label>
                                        <div
                                            style="background-color: #eafced; padding: 10px; border-radius: 5px; display: flex; gap: 30px; align-items: center;">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="jenis_layanan"
                                                    id="prabayar" value="PraBayar"
                                                    {{ old('jenis_layanan') == 'PraBayar' ? 'checked' : '' }}>
                                                <label class="form-check-label" for="prabayar">Pra Bayar
                                                    (Token)</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="jenis_layanan"
                                                    id="pascabayar" value="PascaBayar"
                                                    {{ old('jenis_layanan') == 'PascaBayar' ? 'checked' : '' }}>
                                                <label class="form-check-label" for="pascabayar">Pasca Bayar</label>
                                            </div>
                                        </div>
                                        @error('jenis_layanan')
                                            <small class="text-danger">{{ $message }}</small>
                                        @enderror
                                    </div>

                                    <!-- 5. Nama ID Pelanggan PLN -->
                                    <div class="col-md-12 mb-4">
                                        <label class="form-label">
                                            <span class="text-danger">*</span> Apakah Nama ID Pelanggan PLN memakai
                                            nama
                                            Masjid/Mushola?
                                        </label>
                                        <div
                                            style="background-color: #eafced; padding: 10px; border-radius: 5px; display: flex; gap: 30px; align-items: center;">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                    name="sesuai_id_masjid" id="ya" value="Ya"
                                                    {{ old('sesuai_id_masjid') == 'Ya' ? 'checked' : '' }}>
                                                <label class="form-check-label" for="ya">Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                    name="sesuai_id_masjid" id="tidak" value="Tidak"
                                                    {{ old('sesuai_id_masjid') == 'Tidak' ? 'checked' : '' }}>
                                                <label class="form-check-label" for="tidak">Tidak</label>
                                            </div>
                                        </div>
                                        @error('sesuai_id_masjid')
                                            <small class="text-danger">{{ $message }}</small>
                                        @enderror
                                    </div>





                                    <div class="col-md-12 mb-4">
                                        <label for="estimasi_biaya" class="form-label">Perkiraan Harga Bayar Setiap
                                            Bulan (Setiap
                                            Isi Token)</label>
                                        <input type="text" name="estimasi_biaya" class="form-control"
                                            id="estimasi_biaya-field" style="background-color: #eafced;"
                                            value="{{ old('estimasi_biaya') }}" required>

                                        @error('estimasi_biaya')
                                            <div class="text-danger mt-2">{{ $message }}</div>
                                        @enderror
                                    </div>


                                    <div class="col-md-12 mb-4">
                                        <label for="alasan_id_berbeda-field" class="pb-2">Apa alasan nya kenapa Id
                                            Pelanggan PLN
                                            memakai
                                            Nama yang berbeda dari nama Masjid atau Mushola nya</label>
                                        <input type="text" class="form-control" style="background-color: #eafced;"
                                            value="{{ old('alasan_id_berbeda') }}" name="alasan_id_berbeda"
                                            id="alasan_id_berbeda-field">
                                    </div>

                                    <div class="col-md-12 mb-4">
                                        <label for="foto_meteran_listrik" class="form-label">Foto Meteran
                                            Listrik</label>
                                        <input type="file" name="foto_meteran_listrik"
                                            id="foto_meteran_listrik-field" class="form-control"
                                            style="background-color: #eafced;" accept="image/*" required>
                                    </div>
                                    <a href="javascript:void(0)"
                                        class="btn btn-lg btn-default text-white btn-block btn-rounded shadow btn-next">
                                        <span>Berikutnya</span>
                                        <i class="material-icons">arrow_forward</i>
                                    </a>

                                </div>
                            </div>
                        </div>
                    </div>
                    <style>
                        /* Perbesar ukuran kotak checkbox */
                        .form-check-input {
                            width: 1.5em;
                            height: 1.5em;
                            cursor: pointer;
                            accent-color: #007bff;
                            /* warna biru Bootstrap */
                        }

                        /* Tambah sedikit jarak agar seimbang dengan teks */
                        .form-check-label {
                            margin-left: 8px;
                            font-weight: 500;
                        }
                    </style>
                    <!-- STEP 4 -->
                    <div class="tab-pane fade" id="nav-step4" role="tabpanel" aria-labelledby="nav-step4-tab">


                        <div class="card mb-4">
                            <div class="card-header-mobile  text-light  ">
                                <b>PERSETUJUAN</b>
                            </div>
                            <div class="card-body mt-3 mb-4">
                                <div class="row">
                                    <div class="col-md-12 mt-4">
                                        <input class="form-check-input" type="checkbox" name="agreement"
                                            id="agreement" required>
                                        <label class="form-check-label" for="agreement">
                                            Saya telah membaca dan menyetujui bahwa semua data yang saya isi adalah
                                            benar, Data akan kami pergunakan sebagai kebutuhan untuk registrasi program
                                            Terangi beribu masjid.
                                        </label>
                                    </div>




                                </div>
                                <div class="mt-4">
                                    <button type="submit"
                                        class="btn btn-success btn-lg btn-block btn-rounded shadow-sm">
                                        <i class="material-icons align-middle mr-1">check_circle</i>
                                        Simpan
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
            </form>
        </div>

        <div class="footer">
            <div class="no-gutters">
                <div class="col-auto mx-auto">
                    <div class="row no-gutters justify-content-center">
                         <div class="col-auto">
                            <a href="{{ route('mobilelandingpage') }}" class="btn btn-link-default active">
                                <i class="material-icons">store_mall_directory</i>
                            </a>
                        </div>
                        <div class="col-auto">
                            <a href="{{ route('mobileaktifitas') }}" class="btn btn-link-default ">
                                <i class="material-icons">insert_chart_outline</i>
                            </a>
                        </div>
                        <div class="col-auto">
                            <a href="{{ route('mobilelistmasjid') }}" class="btn btn-link-default">
                                <i class="material-icons">local_mall</i>
                            </a>
                        </div>
                        <div class="col-auto">
                            <a href="{{ route('mobilerequesttoken') }}" class="btn btn-link-default">
                                <i class="material-icons">favorite</i>
                            </a>
                        </div>
                        <div class="col-auto">
                            <a href="profile.html" class="btn btn-link-default">
                                <i class="material-icons">account_circle</i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- jquery, popper and bootstrap js -->
    <script src="mobile/js/jquery-3.3.1.min.js"></script>
    <script src="mobile/js/popper.min.js"></script>
    <script src="mobile/vendor/bootstrap-4.4.1/js/bootstrap.min.js"></script>

    <!-- swiper js -->
    <script src="mobile/vendor/swiper/js/swiper.min.js"></script>

    <!-- nouislider js -->
    <script src="mobile/vendor/nouislider/nouislider.min.js"></script>

    <!-- chart js -->
    <script src="mobile/vendor/chartjs/Chart.min.js"></script>
    <script src="mobile/vendor/chartjs/utils.js"></script>

    <!-- chosen multiselect js -->
    <script src="mobile/vendor/chosen_v1.8.7/chosen.jquery.min.js"></script>

    <!-- template custom js -->
    <script src="mobile/js/main.js"></script>

    <!-- page level script -->
    <script>
        $(window).on('load', function() {
            var swiper = new Swiper('.small-slide', {
                slidesPerView: 'auto',
                spaceBetween: 0,
            });

            var swiper = new Swiper('.news-slide', {
                slidesPerView: 5,
                spaceBetween: 0,
                pagination: {
                    el: '.swiper-pagination',
                },
                breakpoints: {
                    1024: {
                        slidesPerView: 4,
                        spaceBetween: 0,
                    },
                    768: {
                        slidesPerView: 3,
                        spaceBetween: 0,
                    },
                    640: {
                        slidesPerView: 2,
                        spaceBetween: 0,
                    },
                    320: {
                        slidesPerView: 2,
                        spaceBetween: 0,
                    }
                }
            });

            /* range picker for filter */
            var html5Slider = document.getElementById('rangeslider');
            noUiSlider.create(html5Slider, {
                start: [0, 100],
                connect: true,
                range: {
                    'min': 0,
                    'max': 500
                }
            });

            var inputNumber = document.getElementById('input-number');
            var select = document.getElementById('input-select');

            html5Slider.noUiSlider.on('update', function(values, handle) {
                var value = values[handle];

                if (handle) {
                    inputNumber.value = value;
                } else {
                    select.value = Math.round(value);
                }
            });
            select.addEventListener('change', function() {
                html5Slider.noUiSlider.set([this.value, null]);
            });
            inputNumber.addEventListener('change', function() {
                html5Slider.noUiSlider.set([null, this.value]);
            });

            /* chosen select*/
            $(".chosen").chosen();
        });

        /* chart js */
        var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October',
            'November', 'December'
        ];
        var config = {
            type: 'line',
            data: {
                labels: ['January', 'February', 'March', 'April', 'May'],
                datasets: [{
                    label: 'My First dataset',
                    backgroundColor: '#805433',
                    borderColor: '#FFC400',
                    data: [
                        randomScalingFactor(),
                        randomScalingFactor(),
                        randomScalingFactor(),
                        randomScalingFactor(),
                        randomScalingFactor()
                    ],
                    fill: false,
                }]
            },
            options: {
                responsive: true,
                legend: {
                    display: false
                },
                title: {
                    display: false,
                    text: 'Chart.js Line Chart'
                },
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                scales: {
                    xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: false,
                            labelString: 'Month'
                        }
                    }],
                    yAxes: [{
                        display: true,
                        scaleLabel: {
                            display: false,
                            labelString: 'Value'
                        }
                    }]
                }
            }
        };

        window.onload = function() {
            var ctx = document.getElementById('canvas').getContext('2d');
            window.myLine = new Chart(ctx, config);
        };
    </script>
    <script>
        function markStepDone(tabLink) {
            tabLink.classList.add('done');

            const icon = tabLink.querySelector('.material-icons');
            if (icon) {
                icon.innerText = 'check';
            }

            const iconWrap = tabLink.querySelector('.step-icon');
            if (iconWrap) {
                iconWrap.classList.remove('btn-secondary', 'btn-info');
                iconWrap.classList.add('btn-success');
            }
        }
    </script>
    <script>
        function toggleExpand(card) {
            const text = card.querySelector('.collapsible-text');
            const icon = card.querySelector('.expand-icon');

            text.classList.toggle('expanded');

            // toggle icon rotate
            icon.classList.toggle('expanded-icon');
        }
    </script>
    <script>
        $(document).ready(function() {

            // ========================
            // 1️⃣ Provinsi -> Kabupaten
            // ========================
            $('#province_id-field').on('change', function() {
                var provinceID = $(this).val();

                $('#regency_id-field').html('<option value="">-- Pilih Kabupaten/Kota --</option>');
                $('#district_id-field').html('<option value="">-- Pilih Kecamatan --</option>');
                $('#village_id-field').html('<option value="">-- Pilih Kelurahan/Desa --</option>');

                if (provinceID) {
                    $.get("{{ url('get-regencies') }}/" + provinceID, function(data) {
                        $.each(data, function(index, regency) {
                            $('#regency_id-field').append('<option value="' + regency.id +
                                '">' + regency.name + '</option>');
                        });
                    });
                }
            });

            // ========================
            // 2️⃣ Kabupaten -> Kecamatan
            // ========================
            $('#regency_id-field').on('change', function() {
                var regencyID = $(this).val();

                $('#district_id-field').html('<option value="">-- Pilih Kecamatan --</option>');
                $('#village_id-field').html('<option value="">-- Pilih Kelurahan/Desa --</option>');

                if (regencyID) {
                    $.get("{{ url('get-districts') }}/" + regencyID, function(data) {
                        $.each(data, function(index, district) {
                            $('#district_id-field').append('<option value="' + district.id +
                                '">' + district.name + '</option>');
                        });
                    });
                }
            });

            // ========================
            // 3️⃣ Kecamatan -> Kelurahan
            // ========================
            $('#district_id-field').on('change', function() {
                var districtID = $(this).val();

                $('#village_id-field').html('<option value="">-- Pilih Kelurahan/Desa --</option>');

                if (districtID) {
                    $.get("{{ url('get-villages') }}/" + districtID, function(data) {
                        $.each(data, function(index, village) {
                            $('#village_id-field').append('<option value="' + village.id +
                                '">' + village.name + '</option>');
                        });
                    });
                }
            });
        });
    </script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {

            var defaultLat = -7.7956;
            var defaultLng = 110.3695;

            var savedCoords = document.getElementById('map_lokasi_masjid').value;
            var lat = defaultLat;
            var lng = defaultLng;

            // Tampilkan koordinat
            function updateDisplay(lat, lng) {
                document.getElementById('koordinatDisplay').innerHTML =
                    "Lat: " + lat.toFixed(7) + " | Lng: " + lng.toFixed(7);
            }

            // Kalau sudah ada koordinat tersimpan
            if (savedCoords && savedCoords.includes(',')) {
                var parts = savedCoords.split(',');
                lat = parseFloat(parts[0]);
                lng = parseFloat(parts[1]);
            }

            // Buat peta
            var map = L.map('map').setView([lat, lng], 13);



            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap'
            }).addTo(map);

            // Marker
            var marker = L.marker([lat, lng], {
                draggable: true
            }).addTo(map);

            // Update tampilan koordinat awal
            updateDisplay(lat, lng);

            // Saat marker digeser
            marker.on('dragend', function() {
                var pos = marker.getLatLng();
                updateDisplay(pos.lat, pos.lng);
                document.getElementById('map_lokasi_masjid').value =
                    pos.lat.toFixed(7) + ',' + pos.lng.toFixed(7);
            });

            // Saat klik peta
            map.on('click', function(e) {
                marker.setLatLng(e.latlng);
                updateDisplay(e.latlng.lat, e.latlng.lng);
                document.getElementById('map_lokasi_masjid').value =
                    e.latlng.lat.toFixed(7) + ',' + e.latlng.lng.toFixed(7);
            });

            // Ambil lokasi user (GPS)
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {

                    var userLat = position.coords.latitude;
                    var userLng = position.coords.longitude;

                    if (!savedCoords) {
                        map.setView([userLat, userLng], 15);
                        marker.setLatLng([userLat, userLng]);
                        updateDisplay(userLat, userLng);
                        document.getElementById('map_lokasi_masjid').value =
                            userLat.toFixed(7) + ',' + userLng.toFixed(7);
                    }

                });
            }

        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            document.querySelectorAll('.btn-next').forEach(btn => {
                btn.addEventListener('click', function() {

                    // tab aktif
                    let currentTab = document.querySelector('.tab-pane.active');
                    if (!currentTab) return;

                    let firstInvalid = null;

                    // ambil semua field WAJIB di tab aktif
                    const requiredFields = currentTab.querySelectorAll(
                        'input[required], select[required], textarea[required]'
                    );

                    requiredFields.forEach(field => {

                        // validasi kosong
                        if (!field.value.trim()) {
                            field.classList.add('is-invalid');
                            if (!firstInvalid) firstInvalid = field;
                            return;
                        }

                        // validasi khusus HP
                        if (field.classList.contains('input-hp')) {
                            if (!field.value.startsWith('62')) {
                                showWarning(field);
                                field.classList.add('is-invalid');
                                if (!firstInvalid) firstInvalid = field;
                            }
                        }

                    });

                    // JIKA ADA ERROR → STOP
                    if (firstInvalid) {
                        firstInvalid.focus();
                        return;
                    }

                    // ===== PINDAH KE TAB BERIKUTNYA =====

                    let allTabs = Array.from(document.querySelectorAll('.tab-pane'));
                    let currentIndex = allTabs.indexOf(currentTab);
                    let nextTab = allTabs[currentIndex + 1];
                    if (!nextTab) return;

                    let nextTabLink = document.querySelector(
                        `.nav-link[href="#${nextTab.id}"]`
                    );

                    if (nextTabLink) {
                        // tandai step sekarang sebagai selesai
                        markStepDone(document.querySelector('.nav-link.active'));

                        // unlock & buka tab berikutnya
                        nextTabLink.classList.remove('locked');
                        $(nextTabLink).tab('show');

                    }

                });
            });

        });
    </script>
    <script>
        document.querySelectorAll('input, select, textarea').forEach(el => {
            el.addEventListener('input', () => {
                el.classList.remove('is-invalid');
            });
        });
    </script>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        @if (session('success'))
            Swal.fire({
                icon: 'success',
                title: 'Berhasil!',
                text: 'terimakasih telah mengikuti program Terangi beribu masjid, data anda sudah masuk dalam antrian verifikasi, selanjutnya hasil verivikasi akan di hungi via Whatsap terdaftar',
                confirmButtonColor: '#198754'
            });
        @endif

        @if (session('error'))
            Swal.fire({
                icon: 'error',
                title: 'Gagal!',
                text: '{{ session('error') }}',
                confirmButtonColor: '#d33'
            });
        @endif
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const input = document.getElementById("id_pelanggan");
            const errorText = document.getElementById("id_pelanggan_error");

            if (input && errorText) {
                input.addEventListener("input", function() {
                    // Ketika user mulai mengetik, hapus pesan error
                    errorText.style.display = "none";
                });
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function hanyaAngka(fieldId, pesan) {
            const field = document.getElementById(fieldId);

            if (!field) return; // kalau elemen tidak ditemukan, hentikan

            field.addEventListener('input', function(e) {
                const input = e.target;
                const onlyNumbers = input.value.replace(/[^0-9]/g, '');

                if (input.value !== onlyNumbers) {
                    input.value = onlyNumbers;

                    Swal.fire({
                        icon: 'warning',
                        title: 'Input Tidak Valid',
                        text: pesan,
                        timer: 3500,
                        showConfirmButton: false
                    });
                }
            });
        }

        // Daftar field yang ingin dipantau
        hanyaAngka('id_pelanggan-field', 'ID Pelanggan hanya boleh berisi angka!');
        hanyaAngka('no_meteran_listrik-field', 'Nomor Meteran Listrik hanya boleh berisi angka!');
        hanyaAngka('estimasi_biaya-field', 'Perkiraan biaya bayar PLN hanya boleh berisi angka!');
        hanyaAngka('telp_penerima_informasi-field', 'Nomor Telepon hanya boleh berisi angka!');
        hanyaAngka('telp_ketua_dkm-field', 'Nomor Telepon hanya boleh berisi angka!');
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const selectField = document.querySelector('select[name="sesuai_id_mesjid"]');
            const alasanFieldDiv = document.querySelector('#alasan_id_berbeda-field').closest('.col-md-12');

            function toggleAlasanField() {
                if (selectField.value === 'Tidak') {
                    alasanFieldDiv.classList.remove('hidden');
                } else {
                    alasanFieldDiv.classList.add('hidden');
                    document.querySelector('#alasan_id_berbeda-field').value = '';
                }
            }

            // Jalankan saat pertama kali halaman dimuat
            toggleAlasanField();

            // Jalankan setiap kali pilihan berubah
            selectField.addEventListener('change', toggleAlasanField);
        });
    </script>


    <script>
        document.addEventListener('DOMContentLoaded', function() {

            document.querySelectorAll('.btn-next').forEach(btn => {
                btn.addEventListener('click', function() {

                    // tab pane aktif
                    let currentPane = document.querySelector('.tab-pane.active');
                    if (!currentPane) return;

                    // tab link aktif (INI YANG AKAN DITANDAI DONE)
                    let currentTabLink = document.querySelector(
                        `.nav-link[href="#${currentPane.id}"]`
                    );

                    // validasi field wajib
                    let invalidField = null;
                    const requiredFields = currentPane.querySelectorAll(
                        'input[required], select[required], textarea[required]'
                    );

                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            field.classList.add('is-invalid');
                            if (!invalidField) invalidField = field;
                        }
                    });

                    if (invalidField) {
                        invalidField.focus();
                        return;
                    }

                    // === TANDAI STEP SEKARANG SELESAI ===
                    if (currentTabLink) {
                        markStepDone(currentTabLink);
                    }

                    // === PINDAH KE STEP BERIKUTNYA ===
                    let panes = Array.from(document.querySelectorAll('.tab-pane'));
                    let currentIndex = panes.indexOf(currentPane);
                    let nextPane = panes[currentIndex + 1];
                    if (!nextPane) return;

                    let nextTabLink = document.querySelector(
                        `.nav-link[href="#${nextPane.id}"]`
                    );

                    if (nextTabLink) {
                        nextTabLink.classList.remove('locked');
                        $(nextTabLink).tab('show');
                    }

                });
            });

        });
    </script>


    <script>
        $('a[data-toggle="tab"]').on('shown.bs.tab', function() {
            if (typeof map !== 'undefined') {
                map.invalidateSize();
            }
        });
    </script>
<script>
        // Ambil semua input HP
        const hpInputs = document.querySelectorAll(".input-hp");

        // Fungsi menampilkan popup fade
        function showWarning(el) {
            const warn = el.parentElement.querySelector(".hp-warning");
            warn.classList.add("show");
        }

        // Fungsi menyembunyikan popup
        function hideWarning(el) {
            const warn = el.parentElement.querySelector(".hp-warning");
            warn.classList.remove("show");
        }

        // Event listener untuk setiap input HP
        hpInputs.forEach(input => {
            input.addEventListener("input", function() {
                let v = this.value;

                // Jika ketik 0 di awal → otomatis jadi 62
                if (v.startsWith("0")) {
                    this.value = "62" + v.substring(1);
                    showWarning(this);
                    return;
                }

                // Jika tidak diawali 62
                if (v.length > 0 && !v.startsWith("62")) {
                    showWarning(this);
                } else {
                    hideWarning(this);
                }
            });
        });

       
        
    </script>


</body>

</html>
